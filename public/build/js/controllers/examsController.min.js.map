{"version":3,"sources":["examsController.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"examsController.min.js","sourcesContent":["angular.module('myapp')\n.controller('ExamsController', ['$rootScope', '$state', '$stateParams', 'Restangular', '$modal', 'classroom',\nfunction ($rootScope, $state, $stateParams, Restangular, $modal, classroom) {\n    var vm = this;\n    //var classID = $stateParams.id;\n    var base = Restangular.one('classrooms', classroom.id).all('exams');\n\n    vm.exams = base.getList().$object;\n\n    vm.delete = function(item){\n        console.log(\"Delete: \");\n        console.log(item);\n        item.remove().then(\n            function(response){\n                vm.exams.splice(vm.exams.indexOf(item),1);\n            });\n    }\n\n    vm.getYesNoText = function(bool){\n        return bool ? '是' : '否';\n    }\n\n    // 新增或編輯 form\n    vm.showModal = function(exam){\n        var modalInstance = $modal.open({\n            templateUrl: 'partials/modals/examForm.html',\n            controller: 'ExamModalInstanceCtrl',\n            controllerAs: 'ModalCtrl',\n            size: 'sm',\n            resolve:{\n                exam: function(){\n                    return exam;\n                }\n            }\n        });\n\n        modalInstance.result\n            .then(function (data) {\n                console.log(data);\n                if(data.id){\n                    // 更新\n                    data.save();\n                } else {\n                    // 新增\n                    base.post(data).then(\n                        function (response) {\n                            vm.exams = base.getList().$object;\n                        }\n                    );\n                }\n            }, function () {\n                console.info('Exam Form Modal dismissed at: ' + new Date());\n            });\n    };\n\n\n}])\n\n.controller('ExamModalInstanceCtrl', ['$modalInstance', 'exam', function ($modalInstance, exam) {\n    var vm = this;\n    var newExam = {\n        grade: 7,\n        half: '上',\n        name: '',\n        social_merge: false\n    };\n\n    //vm.exam = exam || angular.copy(newExam);\n    vm.exam = exam || newExam;\n    vm.title = exam ? '編輯' : '新增';\n\n    vm.ok = function () {\n        $modalInstance.close(vm.exam);\n    };\n\n    vm.cancel = function () {\n        $modalInstance.dismiss('cancel');\n    };\n}]);"],"sourceRoot":"/source/"}