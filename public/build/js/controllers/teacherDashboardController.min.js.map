{"version":3,"sources":["teacherDashboardController.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"teacherDashboardController.min.js","sourcesContent":["angular.module('myapp')\n.controller('TeacherDashboardController', ['$rootScope', 'Restangular', 'lodash', '$state',\n    function ($rootScope, Restangular, lodash, $state) {\n        var vm = this;\n\n        vm.msg = '載入中....';\n\n        //vm.classList = Restangular.all('classrooms').getList().$object;\n        vm.reloadList = function(){\n            Restangular.all('classrooms').getList().then(\n                function(classList){\n                    vm.classList = classList;\n                    if(!classList.length){\n                        vm.msg = '請先新增班級';\n                    }\n                }\n            );\n        }\n\n        vm.reloadList();\n\n        vm.setNowIndex = function(index){\n            vm.nowIndex = index;\n        };\n\n        // 監聽：new_class_created 新增班級完成\n        $rootScope.$on('new_class_created', function(event, newClassData){\n            vm.classList.push(newClassData);\n        });\n\n        // 監聽：class_deleted 刪除班級完成\n        $rootScope.$on('class_deleted', function(event, deletedClass){\n            lodash.remove(vm.classList, function(item){\n                return item.id == deletedClass.id;\n            });\n            if(!vm.classList.length){\n                vm.msg = '請先新增班級';\n            }\n            $state.go('auth.teacher');\n        });\n\n        // 監聽：class_updated 班級資料已更新\n        $rootScope.$on('class_updated', function(event, newClassData){\n            //vm.classList.push(newClassData);\n            //console.log(newClassData);\n            //console.log(lodash.findWhere(vm.classList, {id: newClassData.id}));\n\n            // 從 vm.classList 中取出更新的物件，以 server 回傳新的資料更新屬性值\n            angular.extend( lodash.findWhere(vm.classList, {id: newClassData.id}), newClassData );\n            //console.log(vm.classList);\n        });\n\n    }]);"],"sourceRoot":"/source/"}